# 第二章：基础类分析

## 2.1 AppActivity 类

[AppActivity](file:///D:/git/app/AndroidProject/app/src/main/java/run/yigou/gxzy/app/AppActivity.java#L25-L230) 是所有页面(Activity)的基类，也就是说项目中每个页面都会继承这个类。这样做的好处是可以把通用的功能都放到这个类中，避免重复编写相同代码。

### 主要功能

1. **标题栏处理**
   - 自动查找页面中的标题栏控件
   - 提供设置标题的方法
   - 处理返回按钮点击事件

2. **状态栏沉浸式处理**
   - 让页面内容延伸到状态栏下面，看起来更加美观
   - 可以设置状态栏文字颜色

3. **网络请求对话框处理**
   - 当发送网络请求时自动显示"加载中"对话框
   - 请求完成后自动隐藏对话框

### 重要方法说明

```java
// 显示加载对话框
public void showDialog()

// 隐藏加载对话框
public void hideDialog()

// 设置标题栏标题
@Override
public void setTitle(CharSequence title)

// 是否使用沉浸式状态栏
protected boolean isStatusBarEnabled()
```

### 使用示例

当你创建一个新的页面时，只需要继承 [AppActivity](file:///D:/git/app/AndroidProject/app/src/main/java/run/yigou/gxzy/app/AppActivity.java#L25-L230)：

```java
public class HomeActivity extends AppActivity {
    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);
        
        // 设置页面标题
        setTitle("首页");
        
        // 发送网络请求时会自动显示加载对话框
        // 请求完成会自动隐藏对话框
    }
}
```

## 2.2 AppFragment 类

[AppFragment](file:///D:/git/app/AndroidProject/app/src/main/java/run/yigou/gxzy/app/AppFragment.java#L16-L76) 是所有片段(Fragment)的基类。Fragment 可以理解为页面的一部分，通常嵌入在 Activity 中使用。

### 主要功能

1. **对话框处理**
   - 通过宿主 Activity 显示/隐藏加载对话框
   - 保持与 Activity 一致的用户体验

2. **网络请求处理**
   - 发送网络请求时显示加载对话框
   - 请求完成隐藏对话框并处理结果

### 重要方法说明

```java
// 显示加载对话框（实际上是调用宿主 Activity 的方法）
public void showDialog()

// 隐藏加载对话框
public void hideDialog()
```

### 使用示例

创建 Fragment 时继承 [AppFragment](file:///D:/git/app/AndroidProject/app/src/main/java/run/yigou/gxzy/app/AppFragment.java#L16-L76)：

```java
public class HomeFragment extends AppFragment<HomeActivity> {
    
    @Override
    protected void initView() {
        // 初始化界面
        
        // 发送网络请求
        // 会自动显示加载对话框
    }
}
```

## 2.3 AppApplication 类

[AppApplication](file:///D:/git/app/AndroidProject/app/src/main/java/run/yigou/gxzy/app/AppApplication.java#L58-L317) 是整个应用程序的入口，当 App 启动时会首先执行这里的代码。

### 主要功能

1. **第三方库初始化**
   - 初始化网络请求框架
   - 初始化图片加载框架
   - 初始化数据库等

2. **用户登录状态管理**
   - 检查用户是否已登录
   - 保存和读取用户信息

3. **全局配置设置**
   - 设置全局样式
   - 配置网络请求参数

### 重要代码说明

```java
// 应用启动时执行的代码
@Override
public void onCreate() {
    super.onCreate();
    
    // 初始化各种功能
    initSdk(this);
    
    // 初始化用户登录状态
    initUserLogin();
}

// 初始化第三方库
public void initSdk(Application application) {
    // 初始化标题栏样式
    // 初始化下拉刷新控件
    // 初始化吐司提示
    // 初始化网络请求框架等
}
```

## 本章小结

这一章我们学习了项目中的三个基础类：

1. [AppActivity](file:///D:/git/app/AndroidProject/app/src/main/java/run/yigou/gxzy/app/AppActivity.java#L25-L230) - 页面基类，处理页面通用功能
2. [AppFragment](file:///D:/git/app/AndroidProject/app/src/main/java/run/yigou/gxzy/app/AppFragment.java#L16-L76) - 片段基类，处理片段通用功能
3. [AppApplication](file:///D:/git/app/AndroidProject/app/src/main/java/run/yigou/gxzy/app/AppApplication.java#L58-L317) - 应用入口，处理全局初始化

这三个类构成了整个项目的基础框架，理解它们有助于你更好地开发应用功能。